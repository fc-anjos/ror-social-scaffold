<div class="container">
  <div class="row">
    <div class="sticky-top d-flex flex-row align-items-center col blur mb-3 p-3">
      <h2 class="flex-grow-1 m-0"><%= "#{@user.name}" %> </h2>
      <span class='profile-link m-0'>
        <%= friendship_interaction(@user) %>
      </span>
    </div>
  </div>

  <div class="row box">
    <div class="d-flex flex-column col-lg-4 mb-3 mb-lg-0 p-0 ">

      <div class="d-flex flex-column blur p-4 <%= @user == current_user ? 'mb-3 divided-height' : 'h-100' %>">
        <h3>Friends</h3>
        <hr>
        <ul class="list-unstyled overflow-scroll m-0">
          <% @user.friends.each do |confirmed_friend| %>
            <li class="d-flex flex-row">
              <span><%= link_to confirmed_friend.name,  user_path(confirmed_friend) %></span>
              <div class="line flex-grow-1"></div>
              <span><%= friendship_interaction(confirmed_friend) %></span>
            </li>
          <% end  %>
        </ul>
      </div>

      <% if @user == current_user %>

        <div class="d-flex flex-column mb-3 blur p-4 divided-height ">
          <h3>Requested Friends</h3>
          <hr>
          <ul class="list-unstyled overflow-scroll m-0">
            <% @user.requested_friends.each do |requested_friend| %>
              <li class="d-flex flex-row">
                <span><%= link_to requested_friend.name,  user_path(requested_friend) %></span>
                <div class="line flex-grow-1"></div>
                <span><%= friendship_interaction(requested_friend) %></span>
              </li>
            <% end  %>
          </ul>
        </div>

        <div class="d-flex flex-column blur p-4 divided-height ">
          <h3>Received Invitations</h3>
          <%# <hr> %>
          <%# <ul class="list-unstyled overflow-scroll m-0"> %>
            <%#   <% @user.received_friends.each do |received_friend| %1> %>
            <%#     <li class="d-flex flex-row"> %>
              <%#       <span><%= link_to received_friend.name,  user_path(received_friend) %1></span> %>
              <%#       <div class="line flex-grow-1"></div> %>
              <%#       <span><%= friendship_interaction(received_friend) %1></span> %>
              <%#     </li> %>
            <%#   <% end  %1> %>
          <%# </ul> %>
        </div>
      <% end %>
    </div>

    <div class="col blur ml-lg-3 p-4 h-100">
      <article class="article-height h-100 d-flex flex-column">
        <h3 class="m-0">Recent posts:</h3>
        <hr>
        <ul class="flex-grow-1 posts list-unstyled h-100 overflow-scroll article-ul m-0">
          <%= render @posts %>
        </ul>
      </article>
    </div>
  </div>
</div>
